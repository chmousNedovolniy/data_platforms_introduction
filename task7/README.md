# Практическое задание 7

## Создание дашборда

#### Ссылка на дашборд http://91.185.86.67:8080/superset/dashboard/p/N3qLBbbvL1k/
#### ![PDF дашборда] (docs/dashboard.pdf) 

Создать дашборд - задача комплексная, и первым шагом в ней выступает выбор инструмента для создания дашбордов. После многократных попыток подключить Metabase или Dbeaver к нашей базе данных, с SSL и без, можно также сделать вывод, что иногда выбор делают за нас, в данном случае это уже развёрнутый Superset. Зайдём в него и обратимся к разделу __Database Connections__.

![0-database-connection.JPG](images/0-database-connection.JPG)

Мы видим, что __подключение к Greenplum__ уже настроено, а значит, нам не нужно изобретать велосипед. Создадим свой датасет, выбрав нашу таблицу team_14_managed из списка public scheme уже существующего подключения Greenplum.

![1-dataset-creation.JPG](images/1-dataset-creation.JPG)

Нам сразу же предложат создать chart. Наш датасет iris описывает виды цветов Ириса, поэтому, пока не углубляясь в подробности, выберем __piechart__ распределения цветов по видам. Для красоты также выберем настройки donut, show total amount и приятную цветовую схему. Назовём наш chart ооответствующе - Iris Distribution by Species.

![2-chart-creation.JPG](images/2-chart-creation.JPG)

Как видим, цветы в таблице распределены поровну между тремя видами. Назовём график и сразу же добавим полученный график в новый __дашборд Team-14__.

![3-dashboard-creation.JPG](images/3-dashboard-creation.JPG)

Дашборд, получился, мягко говоря, скромным. Попробуем это исправить, добавив новые графики.

Не будем бежать галопом по всем возможным диаграммам, а присмотримся к структуре наших данных через __SQL Lab__, благо у нас мало как признаков (6), так и экземляров данных (150).

![4-table-schema.JPG](images/4-table-schema.JPG)

Id сразу выкидываем как признак, это просто нумерация от 1 до 150, но далее у нас есть 4 числовых признака - длина и ширина чашелистника и лепестка соответственно (в сантиметрах), а также метка класса - один из трех видов Ириса. Распределение самого класса мы уже построили, так что теперь посмотрим на распределения признаков, особенности их сочетаний и визуализируем распределения комбинаций признаков по классам.

## Визуализация данных

Хотя мы могли бы построить распределения признаков, место нашего дашборда ограничено, поэтому сделаем лучше __boxplot__ распределение каждого признака для трёх видов. Таким образом, мы получим сетку из 4 графиков, по которой мы наглядно увидим статистические различия между видами.

Сделаем один из графиков, не забудем про схожую цветовую схему и корректные метки. Так как мы не можем указать стобец в чистом виде, выбираем агрегацию по максимуму - она не испортит значения, если выбирать корректный график.

![5-boxplot-creation.JPG](images/5-boxplot-creation.JPG)

На его основе сделаем 3 его изменённые копии.

![6-boxplot-all.JPG](images/6-boxplot-all.JPG)

Уже сейчас прослеживается главная идея датасета - о схожести двух классов и отличии третьего (в нашем случае, первого), позднее мы попробуем зайти поглубже на других примерах.

А пока воспользуемся __pivot таблицей__, для того, чтобы агрегировать ключевые характеристики цветков в текстовом виде. Возьмём средние значения по всем параметрам и занесём в таблицу.

![7-pivot-table.JPG](images/7-pivot-table.JPG)

Скомпонуем получившиеся 6 графиков в дашборде, добавим заголовок и пояснения в текстовых блоках. При необходимости уменьшим размер некоторых таблиц.

![8-summary-charts.JPG](images/8-summary-charts.JPG)

Отделим нашу сводку от более экспериментальной части разделителем.

Теперь попробуем сделать разные графики для сочетаний характеристик, например, __bubble plot__ или __heatmap__. Не забываем использовать корректные агрегации метрик. Не забываем подписывать оси и при необходимости изменять шаг измерения на осях для читаемости. Cопроводим наши таблицы пояснением.

![9-crossdimensional-charts.JPG](images/9-crossdimensional-charts.JPG)

На новой вкладке сделаем две __гистограммы__ для более глубокого изучения распределения отдельных параметров, а именно плотности распределения, которую не видно на boxplot-ах.

![10-histogram-chart.JPG](images/10-histogram-chart.JPG)

Посмотрим на итоговый дашборд. Чтобы поместить его на скрин, придётся изменить масштаб.

![11-final.JPG](images/11-final.JPG)

Конечно, это не самый интересный и информативный датасет для составления дашбордов, тем не менее, нам удалось попробовать разные инструменты внутри Apache Superset для создания графиков, а также попробовать их компоновать на странице.

_Это последнее домашнее задание на курсе, поэтому мы хотели бы поблагодарить Вас за Вашу работу в этом семестре. В свою очередь, мы будем ждать вашей обратной связи, а пока поздравляем с приближающимя новым годом!_

_Саша и Катя_

